# 关于申请信息功能详解

该功能主要用于管理员与用户之间进行信息传递，用户将申请信息发送到这上面，由管理员进行审核

---

## Messages 库

### 成员变量

1. $message_id:主键，自增
2. $message_type:信息类型，决定如何处理其他数据内容
3. $message_index:需处理的对象的ID
4. $message_text:申请/反馈文本
5. $message_date:时间戳
6. $message_state:该信息的状态，暂时分为（0-未处理，1-管理员已处理，2-用户已阅读）
7. $message_change:需要做出的修改
8. $conn：连接变量，与数据库的接口

### 成员函数

1. 构造函数：链接数据库
2. 析构函数：关闭数据库
3. set/get函数：接口

---

## 功能实现

### 功能流程

1. 用户提交的需要由管理员审核的信息都讲发送到这个数据库里，并被设置为还**未处理**的状态
2. 管理员在管理员界面可以查看并处理这些最新的未处理信息。处理结束后，将这条信息设置为**已处理**状态
3. 用户可以在自己的消息界面收到来自管理员的**处理结果**信息以及管理员的相关**反馈**

### 前端设计

主要设计:

1. 在管理员界面设置消息栏，当有新的消息还未处理时，在左侧功能栏点亮一个提升灯*红*
2. 消息栏内的消息旁同样设置一个提示灯，消息处于不同状态时，提示灯颜色不同
3. 处理完成的消息显示为灰色

其他功能(暂不考虑)：

   1. 管理员点击拒绝申请以后，都会弹出一个文本窗口，通过这个向用户说明拒绝理由

### 后端设计

用户发送申请信息：  

   1. 用户填写完相应表单后，点击申请键发送申请
   2. 创建一个**Messages**变量，将表单上的相应信息储存到该对象的成员变量中
   3. 使用**insert()**函数将成员变量中的信息添加到**Messages 库**中

管理员处理申请：

   1. 管理员在点击同意以后，运行成员函数**message_agree()**,改变信息状态
   2. 点击拒绝以后，运行成员函数**message_refuse()**